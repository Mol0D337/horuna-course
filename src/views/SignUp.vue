<template>
  <div class="bcg">
    <div class="blob"></div>
    <div class="sign">
      <div class="sign__left">
        <div class="sign__item">
          <img src="@/assets/image/sign-in.png" alt="Stas Horuna">
        </div>
      </div>
      <div class="sign__right">
        <div class="sign__item">
          <div>
            <div class="sign__title yellow">HI, CHAMP!</div>
            <div class="sign__subtitle">
              thank you for joining my online karate course
            </div>
            <div class="card__sign_inner">
              <div class="card__sign_wrap" :style="`transform: translateX(${-650 * step}px)`">
                <!-- STEP 1 -->
                <div class="card__sign">
                  <div class="card__sign_title">To get started, choose your e-mail</div>
                  <div>
                    <div class="card__sign_label">
                      enter your e-mail address, <br/>
                      it will be your login to access the course.
                    </div>
                    <div class="input_wrapper" :class="{'input--error': $v.email.$error}">
                      <input class="input" type="email" placeholder="insert e-mail" v-model="email">
                      <svg @click="sendEmail" class="input_absolute" stroke="#B7B7B7" width="32" height="32" viewBox="0 0 32 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M2 12H30M30 12L19.5 2M30 12L19.5 22" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                      </svg>
                    </div>
                  </div>
                </div>
                <!-- STEP 2 -->
                <div class="card__sign">
                  <div class="card__sign_title">Enter the code from the letter </div>
                  <div>
                    <div class="card__sign_label">
                      paste the code sent to <br/>
                      {{ email }} <span @click="changeEmail">(change)</span>
                    </div>
                    <div class="pincode-input-wrapper ma-auto position-relative">
                      <v-otp-input
                        v-model="code"
                        :disabled="loading"
                        @finish="sendCode"
                        length="5"
                        dark
                      ></v-otp-input>
                      <v-overlay absolute :value="loading">
                        <v-progress-circular
                          indeterminate
                          color="primary"
                        ></v-progress-circular>
                      </v-overlay>
                    </div>
                  </div>
                </div>
                <!-- STEP 3 -->
                <div class="card__sign">
                  <div class="card__sign_title">Great! Now you can start learning</div>
                  <router-link tag="div" to="/" class="card__sign_title">
                    <span>Open the desktop course now</span>
                    <svg width="32" height="24" viewBox="0 0 32 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M2 12H30M30 12L19.5 2M30 12L19.5 22" stroke="#FF3030" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                  </router-link>
                  <div>
                    <div class="card__sign_label">
                      or download the mobile app
                    </div>
                    <div class="sign__download">
                      <a href="#" target="_blank">
                        <svg width="201" height="60" viewBox="0 0 201 60" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path d="M196.313 1H4.28163C2.46924 1 1 2.46751 1 4.27778V55.0833C1 56.8936 2.46924 58.3611 4.28163 58.3611H196.313C198.125 58.3611 199.595 56.8936 199.595 55.0833V4.27778C199.595 2.46751 198.125 1 196.313 1Z" stroke="white" stroke-width="2"/>
                          <path d="M72.0605 15.6318C72.0605 16.7608 71.778 17.7487 71.0715 18.4543C70.2237 19.3011 69.2347 19.7245 67.9631 19.7245C66.6915 19.7245 65.7024 19.3011 64.8546 18.4543C64.0069 17.6075 63.583 16.6197 63.583 15.3495C63.583 14.0794 64.0069 13.0916 64.8546 12.2447C65.7024 11.398 66.6915 10.9746 67.9631 10.9746C68.5283 10.9746 69.0934 11.1157 69.6585 11.398C70.2237 11.6802 70.6476 11.9625 70.9302 12.3859L70.2237 13.0915C69.6585 12.3859 68.9521 12.1036 67.9631 12.1036C67.1153 12.1036 66.2675 12.3859 65.7024 13.0915C64.9959 13.656 64.7134 14.5028 64.7134 15.4906C64.7134 16.4786 64.9959 17.3253 65.7024 17.8898C66.4088 18.4543 67.1153 18.8777 67.9631 18.8777C68.9521 18.8777 69.6585 18.5954 70.3651 17.8898C70.7889 17.4664 71.0715 16.9019 71.0715 16.1963H67.9631V15.2084H72.0605C72.0605 15.2084 72.0605 15.3495 72.0605 15.6318Z" fill="white"/>
                          <path d="M78.5615 12.1036H74.7466V14.785H78.2788V15.7729H74.7466V18.4543H78.5615V19.4422H73.6162V10.9746H78.5615V12.1036Z" fill="white"/>
                          <path d="M83.2241 19.4422H82.0934V11.9625H79.6914V10.9746H85.6254V11.9625H83.2241V19.4422Z" fill="white"/>
                          <path d="M89.7227 19.4422V10.9746H90.8524V19.4422H89.7227Z" fill="white"/>
                          <path d="M95.6569 19.4422H94.5272V11.9625H92.125V10.9746H97.9179V11.9625H95.5157V19.4422H95.6569Z" fill="white"/>
                          <path d="M109.08 18.4543C108.232 19.3011 107.243 19.7245 105.971 19.7245C104.699 19.7245 103.711 19.3011 102.862 18.4543C102.015 17.6075 101.591 16.6197 101.591 15.3495C101.591 14.0794 102.015 13.0916 102.862 12.2447C103.711 11.398 104.699 10.9746 105.971 10.9746C107.243 10.9746 108.232 11.398 109.08 12.2447C109.927 13.0916 110.351 14.0794 110.351 15.3495C110.351 16.4786 109.927 17.6075 109.08 18.4543ZM103.711 17.7487C104.276 18.3132 105.123 18.7366 105.971 18.7366C106.819 18.7366 107.667 18.4543 108.232 17.7487C108.797 17.1842 109.221 16.3375 109.221 15.3495C109.221 14.3616 108.938 13.5149 108.232 12.9504C107.667 12.3859 106.819 11.9625 105.971 11.9625C105.123 11.9625 104.276 12.2447 103.711 12.9504C103.145 13.5149 102.721 14.3616 102.721 15.3495C102.721 16.1963 103.004 17.0431 103.711 17.7487Z" fill="white"/>
                          <path d="M111.906 19.4422V10.9746H113.178L117.275 17.6075V15.9141V10.9746H118.406V19.4422H117.275L112.895 12.527V14.2205V19.4422H111.906Z" fill="white"/>
                          <path d="M101.308 31.8614C97.9173 31.8614 95.233 34.4017 95.233 37.9299C95.233 41.3169 97.9173 43.9983 101.308 43.9983C104.699 43.9983 107.384 41.458 107.384 37.9299C107.384 34.4017 104.699 31.8614 101.308 31.8614ZM101.308 41.458C99.4712 41.458 97.9173 39.9057 97.9173 37.7888C97.9173 35.6718 99.4712 34.1195 101.308 34.1195C103.145 34.1195 104.699 35.5307 104.699 37.7888C104.699 40.0468 103.145 41.458 101.308 41.458ZM88.1676 31.8614C84.7769 31.8614 82.0924 34.4017 82.0924 37.9299C82.0924 41.3169 84.7769 43.9983 88.1676 43.9983C91.5592 43.9983 94.2435 41.458 94.2435 37.9299C94.2435 34.4017 91.5592 31.8614 88.1676 31.8614ZM88.1676 41.458C86.3315 41.458 84.7769 39.9057 84.7769 37.7888C84.7769 35.6718 86.3315 34.1195 88.1676 34.1195C90.0045 34.1195 91.5592 35.5307 91.5592 37.7888C91.5592 40.0468 90.0045 41.458 88.1676 41.458ZM72.4845 33.6961V36.2364H78.56C78.4188 37.6477 77.8536 38.7766 77.1471 39.4823C76.2994 40.329 74.8864 41.3169 72.4845 41.3169C68.6696 41.3169 65.8437 38.3532 65.8437 34.5429C65.8437 30.7325 68.8109 27.7688 72.4845 27.7688C74.4626 27.7688 76.0168 28.6155 77.1471 29.6034L78.984 27.7688C77.4297 26.3575 75.4516 25.2285 72.6258 25.2285C67.5393 25.2285 63.1592 29.4623 63.1592 34.5429C63.1592 39.6234 67.5393 43.8572 72.6258 43.8572C75.4516 43.8572 77.4297 43.0105 79.1252 41.1758C80.8208 39.4823 81.3859 37.0831 81.3859 35.2485C81.3859 34.684 81.3859 34.1195 81.2446 33.6961H72.4845ZM136.632 35.6718C136.066 34.2606 134.653 31.8614 131.545 31.8614C128.437 31.8614 125.893 34.2606 125.893 37.9299C125.893 41.3169 128.437 43.9983 131.827 43.9983C134.512 43.9983 136.207 42.3048 136.773 41.3169L134.795 39.9057C134.088 40.8935 133.24 41.5991 131.827 41.5991C130.415 41.5991 129.566 41.0347 128.86 39.7646L136.914 36.3775L136.632 35.6718ZM128.437 37.6477C128.437 35.3896 130.273 34.1195 131.545 34.1195C132.534 34.1195 133.523 34.684 133.805 35.3896L128.437 37.6477ZM121.795 43.4338H124.48V25.793H121.795V43.4338ZM117.557 33.1316C116.85 32.4259 115.72 31.7203 114.307 31.7203C111.34 31.7203 108.514 34.4017 108.514 37.7888C108.514 41.1758 111.199 43.7161 114.307 43.7161C115.72 43.7161 116.85 43.0105 117.415 42.3048H117.557V43.1516C117.557 45.4095 116.285 46.6797 114.307 46.6797C112.753 46.6797 111.622 45.5507 111.34 44.5628L109.079 45.5507C109.785 47.1031 111.481 49.0789 114.449 49.0789C117.557 49.0789 120.1 47.2442 120.1 42.8693V32.1437H117.557V33.1316ZM114.449 41.458C112.612 41.458 111.057 39.9057 111.057 37.7888C111.057 35.6718 112.612 34.1195 114.449 34.1195C116.285 34.1195 117.698 35.6718 117.698 37.7888C117.698 39.9057 116.285 41.458 114.449 41.458ZM148.924 25.793H142.566V43.4338H145.25V36.8009H148.924C151.89 36.8009 154.717 34.684 154.717 31.297C154.717 27.9099 151.89 25.793 148.924 25.793ZM149.065 34.4017H145.25V28.3333H149.065C151.043 28.3333 152.173 30.0269 152.173 31.297C152.032 32.7082 150.902 34.4017 149.065 34.4017ZM165.314 31.8614C163.335 31.8614 161.357 32.7082 160.651 34.5429L163.053 35.5307C163.618 34.5429 164.466 34.2606 165.455 34.2606C166.868 34.2606 168.139 35.1074 168.28 36.5187V36.6598C167.857 36.3775 166.727 35.9541 165.596 35.9541C163.053 35.9541 160.51 37.3654 160.51 39.9057C160.51 42.3048 162.629 43.8572 164.89 43.8572C166.727 43.8572 167.574 43.0105 168.28 42.1637H168.422V43.575H170.965V36.8009C170.683 33.555 168.28 31.8614 165.314 31.8614ZM165.031 41.458C164.183 41.458 162.912 41.0347 162.912 39.9057C162.912 38.4944 164.466 38.071 165.737 38.071C166.868 38.071 167.433 38.3533 168.139 38.6355C167.857 40.3291 166.444 41.458 165.031 41.458ZM179.866 32.1437L176.9 39.7646H176.759L173.65 32.1437H170.824L175.487 42.8693L172.802 48.7966H175.487L182.693 32.1437H179.866ZM156.129 43.4338H158.814V25.793H156.129V43.4338Z" fill="white"/>
                          <path d="M19.0762 46.9622C18.5111 46.68 18.2285 45.9744 18.2285 45.2688C18.2285 45.1276 18.2285 44.8454 18.2285 44.7043C18.2285 34.2609 18.2285 23.8175 18.2285 13.5153C18.2285 12.9508 18.3698 12.5275 18.5111 11.9629C18.6524 11.6806 18.935 11.3984 19.2176 11.1162C25.2931 17.1846 31.2274 23.253 37.1617 29.3215C31.0861 34.9665 25.1519 40.8938 19.0762 46.9622Z" fill="white"/>
                          <path d="M43.0957 23.111C41.4002 24.8045 39.5633 26.498 37.8679 28.3327C32.2162 22.5465 26.4232 16.7603 20.7715 10.9741C20.7715 10.9741 20.7715 10.833 20.9128 10.833C28.26 14.9256 35.6072 19.0184 43.0957 23.111Z" fill="white"/>
                          <path d="M20.7715 46.9615C26.4232 41.3164 32.2162 35.6714 37.8679 30.0264C39.4221 31.5787 41.1176 33.1312 42.9544 34.8246C35.6072 38.9173 28.26 43.01 20.9128 46.9615H20.7715Z" fill="white"/>
                          <path d="M43.9443 34.2602C42.1075 32.5668 40.412 30.8732 38.5752 29.1797C40.412 27.3451 42.2488 25.5104 44.0855 23.6758C44.6507 23.958 45.2159 24.2403 45.7811 24.6636C47.194 25.5104 48.7483 26.2161 50.1612 27.0628C50.5851 27.2039 50.8676 27.4862 51.1502 27.9095C51.7153 28.6151 51.7153 29.3209 51.1502 30.0265C50.8676 30.3087 50.5851 30.591 50.1612 30.7321C48.1831 32.0022 46.0637 33.1313 43.9443 34.2602Z" fill="white"/>
                        </svg>
                      </a>
                      <a href="#" target="_blank">
                        <svg width="201" height="60" viewBox="0 0 201 60" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path d="M196.313 1H4.28163C2.46924 1 1 2.46751 1 4.27778V55.0833C1 56.8936 2.46924 58.3611 4.28163 58.3611H196.313C198.125 58.3611 199.595 56.8936 199.595 55.0833V4.27778C199.595 2.46751 198.125 1 196.313 1Z" stroke="white" stroke-width="2"/>
                          <path d="M47.6036 28.3016C47.5656 23.7641 51.3246 21.5525 51.4996 21.4536C49.369 18.3527 46.0666 17.9271 44.9023 17.8967C42.125 17.6079 39.4389 19.5536 38.0236 19.5536C36.5855 19.5536 34.4092 17.9271 32.058 17.9727C29.037 18.0183 26.214 19.7664 24.6694 22.4721C21.4735 27.9976 23.8552 36.1146 26.9217 40.5836C28.4511 42.7725 30.2394 45.2123 32.583 45.1286C34.8733 45.0374 35.7332 43.6693 38.4954 43.6693C41.2347 43.6693 42.0413 45.1286 44.4306 45.0754C46.8884 45.0374 48.4407 42.8789 49.9168 40.6749C51.6898 38.1668 52.3975 35.6966 52.4279 35.575C52.3671 35.537 47.6493 33.7358 47.6036 28.3016ZM43.0914 14.9554C44.324 13.4125 45.1686 11.3224 44.9328 9.19434C43.1523 9.2703 40.9151 10.4256 39.6367 11.9305C38.503 13.2605 37.4833 15.4342 37.7497 17.4787C39.7433 17.6231 41.8054 16.4678 43.0914 14.9554Z" fill="white"/>
                          <path d="M80.7944 44.8021H77.5909L75.8332 39.2994H69.7381L68.0641 44.8021H64.9443L70.9861 26.0597H74.7146L80.7944 44.8021ZM75.3081 36.9889L73.7178 32.0944C73.5504 31.5927 73.2308 30.4147 72.7742 28.5602H72.721C72.5384 29.3583 72.234 30.5363 71.8307 32.0944L70.2708 36.9889H75.3081ZM96.3025 37.8782C96.3025 40.1735 95.6781 41.99 94.4303 43.3277C93.3113 44.5133 91.919 45.1061 90.2602 45.1061C88.4643 45.1061 87.1787 44.4677 86.3952 43.1908V50.2819H83.3892V35.7273C83.3892 34.2833 83.3515 32.8012 83.2752 31.2887H85.9227L86.0909 33.432H86.1434C87.1484 31.8208 88.6702 31.0075 90.7089 31.0075C92.3071 31.0075 93.6386 31.6384 94.7043 32.9C95.7692 34.1617 96.3025 35.8261 96.3025 37.8782ZM93.2432 37.9922C93.2432 36.6774 92.9462 35.5905 92.353 34.7393C91.7057 33.85 90.8312 33.4092 89.7351 33.4092C88.9976 33.4092 88.3199 33.66 87.7185 34.1464C87.118 34.6405 86.7217 35.2865 86.5396 36.0769C86.4559 36.3734 86.41 36.6849 86.4026 36.9889V39.2462C86.4026 40.2267 86.707 41.0551 87.3083 41.7392C87.9089 42.4156 88.6932 42.7576 89.6588 42.7576C90.7926 42.7576 91.6754 42.3168 92.3071 41.4504C92.9232 40.5687 93.2432 39.421 93.2432 37.9922ZM111.871 37.8782C111.871 40.1735 111.247 41.99 109.998 43.3277C108.88 44.5133 107.488 45.1061 105.829 45.1061C104.033 45.1061 102.747 44.4677 101.963 43.1908V50.2819H98.9573V35.7273C98.9573 34.2833 98.9196 32.8012 98.8433 31.2887H101.492L101.659 33.432H101.712C102.716 31.8208 104.238 31.0075 106.278 31.0075C107.876 31.0075 109.207 31.6384 110.272 32.9C111.331 34.1617 111.871 35.8261 111.871 37.8782ZM108.804 37.9922C108.804 36.6774 108.508 35.5905 107.914 34.7393C107.267 33.85 106.392 33.4092 105.297 33.4092C104.558 33.4092 103.881 33.66 103.272 34.1464C102.671 34.6405 102.275 35.2865 102.093 36.0769C102.001 36.4493 101.949 36.7533 101.949 36.9889V39.2462C101.949 40.2267 102.253 41.0551 102.853 41.7392C103.455 42.4156 104.238 42.7576 105.213 42.7576C106.346 42.7576 107.229 42.3168 107.86 41.4504C108.492 40.5687 108.804 39.421 108.804 37.9922ZM129.273 39.5503C129.273 41.1464 128.718 42.446 127.607 43.4416C126.389 44.5361 124.677 45.0833 122.493 45.0833C120.477 45.0833 118.856 44.6957 117.631 43.9128L118.323 41.4124C119.64 42.1952 121.093 42.5828 122.668 42.5828C123.802 42.5828 124.684 42.3244 125.316 41.8151C125.948 41.3059 126.267 40.6219 126.267 39.7707C126.267 39.0107 126.001 38.3722 125.484 37.8478C124.966 37.331 124.106 36.8445 122.897 36.4038C119.609 35.1801 117.965 33.3864 117.965 31.038C117.965 29.5026 118.544 28.241 119.708 27.2606C120.865 26.2801 122.402 25.7861 124.319 25.7861C126.024 25.7861 127.447 26.0825 128.581 26.6753L127.827 29.1227C126.762 28.545 125.567 28.2638 124.22 28.2638C123.163 28.2638 122.326 28.5222 121.732 29.039C121.23 29.5026 120.979 30.0651 120.979 30.7339C120.979 31.4711 121.268 32.0868 121.847 32.5656C122.349 33.0064 123.254 33.4928 124.57 34.0097C126.183 34.6633 127.371 35.4157 128.132 36.2898C128.892 37.1638 129.273 38.2506 129.273 39.5503ZM139.241 33.546H135.923V40.1051C135.923 41.7772 136.509 42.6056 137.681 42.6056C138.221 42.6056 138.663 42.56 139.02 42.4688L139.104 44.7489C138.511 44.9693 137.735 45.0833 136.768 45.0833C135.581 45.0833 134.652 44.7185 133.983 43.9965C133.314 43.2744 132.979 42.0583 132.979 40.3559V33.546H131.008V31.2963H132.979V28.8187L135.931 27.9294V31.2963H139.248L139.241 33.546ZM154.163 37.939C154.163 40.0139 153.569 41.724 152.382 43.054C151.142 44.4296 149.491 45.1137 147.429 45.1137C145.442 45.1137 143.86 44.4525 142.68 43.1452C141.501 41.8304 140.915 40.1659 140.915 38.167C140.915 36.0693 141.524 34.3592 142.742 33.0216C143.959 31.6839 145.595 31.0227 147.657 31.0227C149.643 31.0227 151.241 31.6839 152.443 32.9988C153.584 34.268 154.163 35.9173 154.163 37.939ZM151.043 38.0074C151.043 36.7686 150.777 35.7045 150.236 34.8229C149.605 33.7512 148.707 33.2116 147.535 33.2116C146.333 33.2116 145.405 33.7512 144.78 34.8229C144.241 35.7121 143.974 36.7914 143.974 38.0682C143.974 39.307 144.241 40.3711 144.78 41.2604C145.428 42.3319 146.341 42.8716 147.512 42.8716C148.662 42.8716 149.559 42.3244 150.214 41.2376C150.769 40.3179 151.043 39.2462 151.043 38.0074ZM163.941 33.9336C163.628 33.8804 163.309 33.85 162.989 33.85C161.932 33.85 161.118 34.2453 160.54 35.0433C160.038 35.7501 159.786 36.6393 159.786 37.711V44.8021H156.781V35.5449C156.781 34.1237 156.758 32.7099 156.697 31.2887H159.315L159.421 33.8728H159.504C159.824 32.9836 160.319 32.2692 161.011 31.7296C161.635 31.2583 162.404 31.0075 163.187 31.0075C163.469 31.0075 163.712 31.0303 163.941 31.0607V33.9336ZM177.387 37.407C177.394 37.863 177.356 38.319 177.28 38.7674H168.256C168.286 40.1051 168.727 41.1235 169.564 41.8304C170.325 42.4612 171.307 42.7728 172.517 42.7728C173.856 42.7728 175.073 42.56 176.169 42.1344L176.641 44.2168C175.362 44.7717 173.848 45.0529 172.106 45.0529C170.005 45.0529 168.361 44.4373 167.159 43.206C165.965 41.9748 165.364 40.3179 165.364 38.243C165.364 36.2061 165.919 34.5112 167.038 33.1584C168.202 31.7143 169.785 30.9923 171.771 30.9923C173.719 30.9923 175.195 31.7143 176.2 33.1584C176.983 34.3061 177.387 35.7197 177.387 37.407ZM174.518 36.6317C174.541 35.7425 174.343 34.9749 173.932 34.3212C173.414 33.4852 172.608 33.0672 171.535 33.0672C170.554 33.0672 169.754 33.4776 169.137 34.2908C168.635 34.9369 168.339 35.7197 168.247 36.6242L174.518 36.6317Z" fill="white"/>
                          <path d="M68.871 19.4401C68.034 19.4401 67.3112 19.4021 66.71 19.3337V10.2665C67.5547 10.1373 68.4069 10.0689 69.2591 10.0765C72.7061 10.0765 74.2964 11.7713 74.2964 14.5302C74.2888 17.7148 72.417 19.4401 68.871 19.4401ZM69.3808 11.2393C68.9167 11.2393 68.521 11.2698 68.1938 11.3381V18.224C68.3688 18.2544 68.7113 18.262 69.1906 18.262C71.4505 18.262 72.7365 16.9776 72.7365 14.5759C72.7289 12.425 71.5647 11.2393 69.3808 11.2393ZM79.2424 19.5084C77.3021 19.5084 76.0389 18.0568 76.0389 16.0883C76.0389 14.0362 77.3249 12.577 79.349 12.577C81.2665 12.577 82.5527 13.9602 82.5527 15.9819C82.5527 18.0568 81.2285 19.5084 79.2424 19.5084ZM79.2957 13.6562C78.2304 13.6562 77.5456 14.6518 77.5456 16.0503C77.5456 17.4184 78.2456 18.414 79.2805 18.414C80.323 18.414 81.0154 17.3499 81.0154 16.0199C81.023 14.6671 80.3382 13.6562 79.2957 13.6562ZM93.6315 12.7138L91.5542 19.3564H90.1997L89.3399 16.4759C89.1266 15.7691 88.9445 15.0547 88.8075 14.3327H88.7771C88.6705 15.0547 88.4646 15.7843 88.2439 16.4759L87.3308 19.3564H85.9615L84.0056 12.7138H85.5275L86.2806 15.8679C86.4562 16.6203 86.608 17.3272 86.7302 18.0036H86.7606C86.8672 17.4412 87.0494 16.7495 87.3086 15.8831L88.2521 12.7138H89.454L90.3597 15.8147C90.5804 16.5671 90.7551 17.3044 90.8921 18.0036H90.9299C91.0292 17.3195 91.1735 16.5975 91.3795 15.8147L92.1859 12.7138H93.6315ZM101.294 19.3564H99.8182V15.5411C99.8182 14.3631 99.3686 13.7778 98.4785 13.7778C97.6039 13.7778 97.0025 14.5302 97.0025 15.4043V19.3564H95.5266V14.6138C95.5266 14.0287 95.511 13.3978 95.4733 12.7138H96.7745L96.8426 13.7398H96.8803C97.2766 13.033 98.083 12.577 98.9888 12.577C100.381 12.577 101.301 13.6411 101.301 15.3815L101.294 19.3564ZM105.365 19.3564H103.889V9.66602H105.365V19.3564ZM110.76 19.5084C108.82 19.5084 107.556 18.0568 107.556 16.0883C107.556 14.0362 108.843 12.577 110.867 12.577C112.784 12.577 114.07 13.9602 114.07 15.9819C114.07 18.0568 112.739 19.5084 110.76 19.5084ZM110.813 13.6562C109.748 13.6562 109.063 14.6518 109.063 16.0503C109.063 17.4184 109.763 18.414 110.798 18.414C111.84 18.414 112.533 17.3499 112.533 16.0199C112.533 14.6671 111.856 13.6562 110.813 13.6562ZM119.898 19.3564L119.792 18.5888H119.754C119.305 19.2044 118.643 19.5008 117.806 19.5008C116.611 19.5008 115.767 18.6648 115.767 17.5476C115.767 15.9059 117.19 15.0623 119.655 15.0623V14.9407C119.655 14.0666 119.191 13.6258 118.278 13.6258C117.624 13.6258 117.045 13.7931 116.543 14.1199L116.246 13.147C116.863 12.767 117.631 12.5694 118.529 12.5694C120.264 12.5694 121.146 13.4814 121.146 15.3131V17.7604C121.146 18.4292 121.177 18.9536 121.246 19.3488L119.898 19.3564ZM119.693 16.0503C118.049 16.0503 117.228 16.4455 117.228 17.388C117.228 18.0872 117.654 18.4292 118.24 18.4292C118.994 18.4292 119.693 17.8591 119.693 17.0763V16.0503ZM128.307 19.3564L128.239 18.2924H128.2C127.774 19.0981 127.059 19.5084 126.062 19.5084C124.457 19.5084 123.27 18.1024 123.27 16.1187C123.27 14.0438 124.503 12.577 126.184 12.577C127.075 12.577 127.706 12.8734 128.056 13.4814H128.086V9.66602H129.562V17.5628C129.562 18.2012 129.578 18.8092 129.615 19.3488H128.307V19.3564ZM128.094 15.4499C128.094 14.5226 127.477 13.7246 126.534 13.7246C125.438 13.7246 124.768 14.6975 124.768 16.0579C124.768 17.3956 125.461 18.3153 126.504 18.3153C127.431 18.3153 128.094 17.5096 128.094 16.552V15.4499ZM138.952 19.5084C137.012 19.5084 135.749 18.0568 135.749 16.0883C135.749 14.0362 137.034 12.577 139.059 12.577C140.976 12.577 142.262 13.9602 142.262 15.9819C142.262 18.0568 140.939 19.5084 138.952 19.5084ZM139.006 13.6562C137.94 13.6562 137.255 14.6518 137.255 16.0503C137.255 17.4184 137.956 18.414 138.99 18.414C140.033 18.414 140.725 17.3499 140.725 16.0199C140.733 14.6671 140.048 13.6562 139.006 13.6562ZM150.214 19.3564H148.737V15.5411C148.737 14.3631 148.289 13.7778 147.399 13.7778C146.523 13.7778 145.923 14.5302 145.923 15.4043V19.3564H144.446V14.6138C144.446 14.0287 144.431 13.3978 144.393 12.7138H145.694L145.763 13.7398H145.8C146.197 13.033 147.003 12.577 147.908 12.577C149.301 12.577 150.222 13.6411 150.222 15.3815V19.3564H150.214ZM160.152 13.8234H158.523V17.0459C158.523 17.8668 158.805 18.2772 159.383 18.2772C159.642 18.2772 159.862 18.2468 160.038 18.2088L160.076 19.326C159.787 19.4325 159.406 19.4933 158.927 19.4933C157.762 19.4933 157.062 18.8549 157.062 17.1675V13.8158H156.088V12.7062H157.062V11.4901L158.516 11.0493V12.7062H160.144L160.152 13.8234ZM167.982 19.3564H166.505V15.5715C166.505 14.3859 166.056 13.7854 165.166 13.7854C164.397 13.7854 163.69 14.3023 163.69 15.3587V19.3641H162.214V9.66602H163.69V13.6562H163.721C164.185 12.9342 164.862 12.577 165.722 12.577C167.129 12.577 167.989 13.6714 167.989 15.4043L167.982 19.3564ZM175.994 16.3923H171.558C171.588 17.6464 172.418 18.3608 173.651 18.3608C174.305 18.3608 174.913 18.2544 175.446 18.0492L175.675 19.0752C175.043 19.3488 174.305 19.4857 173.445 19.4857C171.368 19.4857 170.135 18.1708 170.135 16.1415C170.135 14.1046 171.398 12.577 173.278 12.577C174.974 12.577 176.04 13.831 176.04 15.7311C176.055 15.9439 176.04 16.1719 175.994 16.3923ZM174.639 15.3359C174.639 14.3098 174.123 13.5878 173.179 13.5878C172.327 13.5878 171.657 14.325 171.565 15.3359H174.639Z" fill="white"/>
                        </svg>
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="d-flex justify-content-between">
              <Step :step="step" :stepArray="['e-mail', 'confirm', 'login']"/>
              <div v-if="isReset" class="sign__reset" @click="resetCode">resend code</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
import Step from "@/components/Step";
import {handle, handleError} from "@/utils/errorsHandler";
import { email, required } from 'vuelidate/lib/validators';
import {ConfirmRegister, Register} from "@/api";

export default {
  name: "SignUp",
  components: {
    Step,
  },
  data() {
    return {
      step: 0,
      email: '',
      code: '',
      isReset: false,
      loading: false,
    }
  },
  validations() {
    return {
      email: {
        required,
        email,
      },
    };
  },
  methods: {
    async sendEmail() {
      try {
        this.$v.$touch();
        if (!this.$v.email.$error) {
          await Register(this.$route.query.utm_code, { email: this.email.toLowerCase() });
          this.step = 1;
          const intervalID = setInterval(() => {
            this.isReset = true;
            clearInterval(intervalID);
          }, 60 * 1000)
        }
      } catch (error) {
        this.errorSign = true;
        handleError(error);
      }
    },
    async sendCode(code) {
      try {
        this.loading = true;
        const resp = await ConfirmRegister({
          email: this.email.toLowerCase(),
          code: code,
        });
        if (resp.data) {
          this.$cookies.set('access_token', resp.data.access_token, 1800);
          this.$cookies.set('refresh_token', resp.data.refresh_token, 2592000);
          await this.$store.dispatch('auth/GET_USER');
          handle('join to course successfully!');
          this.step = 2;
        }
      } catch (error) {
        handle('invalid code');
      } finally {
        this.loading = false;
      }
    },
    changeEmail() {
      this.code = '';
      this.step = 0;
    },
    async resetCode() {
      try {
        this.isReset = false;
        this.code = '';
        await this.sendEmail();
      } catch (error) {
        handleError(error);
      }
    },
  }
}
</script>

<style lang="scss">
.sign {
  display: flex;
  justify-content: space-between;
  align-items: center;
  height: 100vh;
  background: $black;
  &__reset {
    font-size: 15px;
    letter-spacing: 1px;
    color: $yellow;
    cursor: pointer;
  }
  &__item {
    //height: 655px;
    //margin: auto 0;
    //display: flex;
    //flex-direction: column;
    //justify-content: center;
  }
  &__left {
    width: 50%;
    height: inherit;
    display: flex;
    justify-content: center;
    align-items: flex-end;
    text-align: center;
    z-index: 99;
    position: relative;
    img {
      width: 90%;
    }
  }
  &__right {
    width: 50%;
    height: inherit;
    display: flex;
    justify-content: center;
    align-items: center;
    background: rgba(24, 26, 32, 0.5);
  }
  &__title {
    font-size: 32px;
    line-height: 48px;
    margin-bottom: 25px;
  }
  &__subtitle {
    font-size: 20px;
    line-height: 38px;
  }
  &__footer {
    display: flex;
    align-items: center;
    height: max-content;
    font-size: 15px;

    letter-spacing: 1px;
    a {
      margin: 0 5px;
      color: $white;
      text-decoration: underline;
    }
    &_item {
      text-decoration: none !important;
      display: flex;
      align-items: center;
      margin: 0 30px !important;
      color: $gray;
      svg {
        margin-right: 10px;
      }
    }
  }
}
</style>
